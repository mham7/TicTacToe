@page "/counter"
@rendermode InteractiveServer

<PageTitle>Counter</PageTitle>

<h1>Counter</h1>

<p role="status">Current count: @arrayCount[0]</p>

<button class="btn btn-primary" @onclick="IncrementAll">Click me</button>

<div class="grid">
    @for (int i = 0; i < 3; i++)
    {
        int row = i;
        <div class="row">
            @for (int j = 0; j < 3; j++)
            {
                int col = j; // Use a different variable for columns
                int index = row * 3 + col;

                <div class="square" @onclick="() => ToggleSquare(index)">
                    <h5 class="char">@arrayCount[index]</h5>
                </div>
            }
        </div>
    }
</div>

@code {
    private char[] arrayCount;

    protected override void OnInitialized()
    {
        arrayCount = new char[9]; // Initialize the array with 'x'

        // Explicitly set all elements to 'x'
        for (int i = 0; i < arrayCount.Length; i++)
        {
            arrayCount[i] = 'x';
        }
    }

    private void ToggleSquare(int index)
    {
        if (arrayCount[index] == 'x')
        {
            arrayCount[index] = 'o';
        }
        else
        {
            arrayCount[index] = 'x';
        }
    }

    private void IncrementAll()
    {
        for (int i = 0; i < arrayCount.Length; i++)
        {
            arrayCount[i]++;
        }
    }
}
